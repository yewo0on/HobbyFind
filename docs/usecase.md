# Use Case Document — HobbyFind

## 1. 액터 정의 (Actor Definitions)

| 액터 | 설명 | 주요 권한/역할 |
| --- | --- | --- |
| 비회원 사용자 | 로그인하지 않은 방문자 | 홈/카테고리 페이지 탐색, 취미 카드 조회, 로그인/회원가입 페이지 접근 |
| 회원 사용자 | 아이디/비밀번호로 로그인 완료한 사용자 | 비회원 기능 + 취미 북마크 추가/해제, 마이페이지 조회 |
| 시스템 (HobbyFind) | 웹 애플리케이션 및 서버 로직 | 인증/인가 처리, 취미 데이터 제공, 북마크 저장/조회, 통계 계산 및 렌더링 |

---

## 2. 상세 Use Case 시나리오 (Detailed Use Case Scenarios)

### UC-01. 메인페이지 탐색 (홈 탐색)

* **액터**: 비회원, 회원
* **목적**: 전체/필터된 취미를 홈에서 탐색
* **관련 페이지**: `/`

### UC-02. 카테고리 선택 및 탐색

* **액터**: 비회원, 회원
* **목적**: 특정 카테고리에 속한 취미만 모아보기
* **관련 페이지**: `/`, `/category/[type]`

### UC-03. 로그인

* **액터**: 비회원
* **목적**: 아이디/비밀번호로 서비스에 로그인
* **관련 페이지**: `/login`

### UC-04. 회원가입

* **액터**: 비회원
* **목적**: 아이디/비밀번호로 계정 생성
* **관련 페이지**: `/signup`

### UC-05. 북마크 추가/해제

* **액터**: 회원
* **목적**: 관심 있는 취미를 북마크하거나 해제
* **관련 페이지**: `/`, `/category/[type]`, `/mypage`

### UC-06. 마이페이지 조회

* **액터**: 회원
* **목적**: 북마크 목록 및 카테고리별 북마크 통계 확인
* **관련 페이지**: `/mypage`

---

## 3. 주요 단계 및 이벤트 흐름 (Main Steps and Flow of Events)

### UC-01. 메인페이지 탐색

| 단계 | 액터/시스템 | 설명 |
| --- | --- | --- |
| 1 | 액터 | 브라우저에서 `/` 접속 |
| 2 | 시스템 | Hero 섹션, 대분류 필터, 전체 취미 카드 그리드를 렌더링 |
| 3 | 액터 | 스크롤하여 취미 카드 목록을 탐색 |
| 4 | 액터 | (선택) 대분류 필터를 토글하여 특정 카테고리만 보기 |
| 5 | 시스템 | 필터 조건에 맞는 취미 카드만 그리드에 표시 |

### UC-02. 카테고리 선택 및 탐색

| 단계 | 액터/시스템 | 설명 |
| --- | --- | --- |
| 1 | 액터 | Top Bar에서 "운동형/지능형/예술형" 중 하나 클릭 |
| 2 | 시스템 | 해당 카테고리 타입에 맞는 URL로 라우팅 `/category/[type]` |
| 3 | 시스템 | 상단에 카테고리명과 소개 문구, 본문에 해당 카테고리 취미 카드 그리드를 렌더링 |
| 4 | 액터 | 카드 정보를 읽으며 취미 탐색 |

### UC-03. 로그인

| 단계 | 액터/시스템 | 설명 |
| --- | --- | --- |
| 1 | 액터 | Top Bar의 "로그인"을 클릭하거나 `/login` 직접 접근 |
| 2 | 시스템 | 아이디/비밀번호 폼과 회원가입 링크를 렌더링 |
| 3 | 액터 | 아이디와 비밀번호 입력 후 "로그인" 버튼 클릭 |
| 4 | 시스템 | 자격 증명 검증 (DB 조회 등) |
| 5 | 시스템 | 성공 시 세션 생성 후 `/` 또는 직전 페이지로 리다이렉트 |
| 6 | 시스템 | Top Bar를 로그인 상태용(마이페이지/로그아웃)으로 변경 |

### UC-04. 회원가입

| 단계 | 액터/시스템 | 설명 |
| --- | --- | --- |
| 1 | 액터 | Top Bar의 "회원가입" 클릭 또는 `/signup` 접근 |
| 2 | 시스템 | 아이디/비밀번호, 약관 동의, 로그인 링크가 포함된 폼 렌더링 |
| 3 | 액터 | 필수 필드 입력 및 약관 동의 후 "회원가입" 버튼 클릭 |
| 4 | 시스템 | 유효성 검사 및 중복 계정 여부 확인 |
| 5 | 시스템 | 성공 시 계정 생성, 이후 로그인 페이지 또는 자동 로그인 처리 후 `/`로 이동 |

### UC-05. 북마크 추가/해제

| 단계 | 액터/시스템 | 설명 |
| --- | --- | --- |
| 1 | 액터(회원) | 홈 또는 카테고리 페이지의 취미 카드에서 북마크 아이콘 클릭 |
| 2 | 시스템 | 현재 북마크 상태 조회 후, 반대 상태로 토글 (추가 또는 삭제) |
| 3 | 시스템 | DB에 북마크 상태 저장/갱신 |
| 4 | 시스템 | UI 상 북마크 아이콘 스타일 변경(채워짐/비움) |
| 5 | 시스템 | 마이페이지에서 사용할 통계 데이터에 반영 |

### UC-06. 마이페이지 조회

| 단계 | 액터/시스템 | 설명 |
| --- | --- | --- |
| 1 | 액터 | Top Bar에서 "마이페이지" 클릭 |
| 2 | 시스템 | 로그인 여부 확인 |
| 3 | 시스템 | 로그인 상태면 `/mypage` 렌더링, 북마크 목록 및 통계 데이터 조회 |
| 4 | 시스템 | 북마크한 취미 카드 리스트와 카테고리별 북마크 분포 통계 차트 표출 |
| 5 | 액터 | 리스트 및 차트를 통해 자신의 취미 성향 확인 |

---

## 4. 대체 흐름 및 엣지 케이스 (Alternative Flows and Edge Cases)

| UC | 상황 | 대체 흐름/엣지 케이스 |
| --- | --- | --- |
| UC-03 로그인 | 잘못된 아이디/비밀번호 | 시스템이 에러 메시지("아이디 또는 비밀번호를 확인해주세요")를 폼 하단에 표시, 로그인 페이지 유지 |
| UC-03 로그인 | 이미 로그인 상태에서 `/login` 접근 | 선택 1) 홈(`/`)으로 리다이렉트, 선택 2) 로그인 폼은 보여주되 상단에 "이미 로그인되어 있습니다" 메시지 표시(IA/정책에 따라 결정) |
| UC-04 회원가입 | 아이디 중복 | 회원가입 실패, 해당 필드 근처에 에러 메시지 표시 |
| UC-04 회원가입 | 약관 미동의 | 회원가입 버튼 클릭 시 에러 메시지(필수 동의 안내) 표시, 계정 생성 안 함 |
| UC-05 북마크 | 비회원이 북마크 아이콘 클릭 | 북마크 상태 변경하지 않고, 로그인 안내 메시지 또는 로그인 페이지로 이동 |
| UC-06 마이페이지 | 비로그인 상태에서 `/mypage` 접근 | `/login`으로 리다이렉트, 이후 로그인 성공 시 `/mypage`로 보내는 플로우 가능 |
| 전반 | 네트워크 오류, 서버 오류 | 에러 토스트/메시지 표시, 가능한 경우 재시도 버튼 제공 (페이지 리로드 포함) |

---

## 5. 사전조건과 사후조건 (Preconditions and Postconditions)

| Use Case | 사전조건 (Preconditions) | 사후조건 (Postconditions) |
| --- | --- | --- |
| UC-01 메인페이지 탐색 | 서비스 접속 가능 상태 | 사용자가 전체/필터 취미 정보를 인지함 |
| UC-02 카테고리 탐색 | 서비스 접속 가능 상태, 카테고리 타입이 유효(sports/intelligence/art) | 사용자가 특정 카테고리 취미 리스트를 인지함 |
| UC-03 로그인 | 사용자 계정이 존재, 올바른 아이디/비밀번호 입력 | 로그인 세션 생성, Top Bar가 회원 상태로 변경 |
| UC-04 회원가입 | 유효한 아이디/비밀번호 입력, 약관 동의 완료, 중복 아이디 아님 | 새 사용자 계정 생성, 이후 로그인 가능 |
| UC-05 북마크 추가/해제 | 회원으로 로그인된 상태, 유효한 취미 ID | 북마크 데이터가 사용자-취미 기준으로 저장/삭제, UI와 마이페이지 통계에 반영 |
| UC-06 마이페이지 조회 | 회원으로 로그인된 상태 | 북마크 목록 및 통계 정보를 확인함 |

---

## 6. 비즈니스 규칙 및 제약사항 (Business Rules and Constraints)

* **역할 및 권한**:
  * 비회원: 홈(`/`) 및 카테고리(`/category/[type]`) 탐색만 가능, 북마크 및 마이페이지 접근 불가.
  * 회원: 비회원 권한 + 북마크 기능 및 마이페이지 접근 가능.
* **취미 데이터**:
  * 취미 목록은 고정된 세 카테고리의 정해진 취미들만 사용 (변경·확장 없음).
* **북마크**:
  * 한 취미에 대해 한 회원은 0 또는 1개의 북마크 상태만 가질 수 있음 (토글).
* **경로 접근**:
  * `/mypage`는 로그인 필요. 비로그인 시 로그인 페이지로 강제 이동.
* **기능 범위**:
  * 추가 기능(댓글, 공유, 추천 등)은 포함하지 않음.

---

## 7. 예외 처리 절차 (Exception Handling Procedures)

| 상황 | 처리 방식 |
| --- | --- |
| 로그인 실패 (자격 증명 오류) | 로그인 페이지 유지, 에러 메시지 표시, 비밀번호 필드 초기화 가능 |
| 회원가입 실패 (유효성/중복) | 해당 필드 하단에 구체적인 에러 메시지 표시, 나머지 입력값 유지 |
| 비로그인 상태에서 북마크 클릭 | 북마크 상태 변경하지 않고 안내 메시지(또는 `/login`으로 이동) |
| 비로그인 상태에서 `/mypage` 직접 접근 | `/login`으로 리다이렉트, 로그인 완료 후 마이페이지로 이동할 수 있게 처리 가능 |
| 서버/네트워크 오류 | 사용자에게 "잠시 후 다시 시도해주세요" 등의 메시지 표시, 재시도 옵션 제공, 콘솔/로그에 오류 기록 |
| 잘못된 URL 파라미터(`/category/[type]`에 유효하지 않은 type) | 404 페이지 또는 홈(`/`)으로 리다이렉트 |

---

## 8. UI 고려사항 (User Interface Considerations)

* **일관된 Top Bar**: 전체 페이지 공통으로 상단에 고정, 로고/카테고리/인증 관련 버튼 일관성 유지.
* **상태 인디케이터**: 로그인 상태에 따라 Top Bar 우측 메뉴(로그인/회원가입 vs 마이페이지/로그아웃) 즉시 변경.
* **북마크 버튼**: 활성/비활성 시 명확히 구분되는 아이콘/색상 사용.
* **피드백**: 로그인/회원가입/북마크 토글 시 로딩/완료 피드백 제공 (버튼 비활성화, 스피너, 토스트 등).
* **에러 메시지**: 로그인/회원가입 폼 에러는 필드 근처 또는 폼 하단에 명확히 표기.
* **리다이렉션**: 마이페이지 진입 시 비로그인 상태일 경우 로그인 페이지 안내 메시지와 함께 이동.
* **가독성**: 취미 카드에 카테고리 태그/색상 배지 표시, 제목과 카테고리 식별이 쉽게 디자인.

---

## 9. 데이터 요구사항 및 데이터 흐름 (Data Requirements and Data Flow)

### 9.1 주요 데이터 모델 (개념 수준)

* **User**
  * `id`, `username(or email)`, `passwordHash`, `createdAt` 등
* **Hobby**
  * `id`, `name`, `category` (sports/intelligence/art), `description` 등
  * 목록은 고정 값 (시드 데이터 or 상수)
* **Bookmark**
  * `id`, `userId`, `hobbyId`, `createdAt`

### 9.2 데이터 흐름 개요

* **홈/카테고리 페이지**: 클라이언트가 서버(또는 정적 데이터)에서 취미 목록을 가져옴 → 필터 및 카테고리별로 UI 렌더링.
* **로그인**: 폼 제출 → 서버에서 User 테이블 조회 → 유효하면 세션/토큰 발급 → 클라이언트에 세션 유지 정보 반영.
* **회원가입**: 폼 제출 → 서버에서 유효성 검사 및 중복 체크 → User 테이블에 저장 → 결과 반환.
* **북마크**: 북마크 토글 요청 → 서버에서 Bookmark 테이블 삽입/삭제 → 성공 결과 반환 → 클라이언트 UI 갱신.
* **마이페이지**: 클라이언트가 현재 사용자 ID로 Bookmark + Hobby 조인 데이터를 요청 → 리스트 및 카테고리별 count 계산 → UI/차트 렌더링.

---

## 10. 보안 및 개인정보 고려사항 (Security and Privacy Considerations)

* **인증 정보 보호**: 비밀번호는 평문 저장 금지, 안전한 해시 알고리즘 사용.
* **세션 관리**: 로그인 세션/토큰은 안전한 방식으로 저장 (HTTP-only 쿠키 등)하고, 세션 만료 정책 적용.
* **접근 제어**: `/mypage` 및 북마크 API는 반드시 로그인된 사용자만 접근 가능하도록 서버 측에서 검증.
* **입력 검증**: 로그인/회원가입/북마크 요청의 모든 입력값에 대해 서버 측 유효성 검사 수행.
* **로그 및 모니터링**: 인증 실패, 예외 발생 시 적절한 수준에서 서버 로그 남기되, 비밀번호 등 민감한 정보는 로그에 남기지 않음.
* **개인정보 최소 수집**: 교육용 프로젝트 목적에 맞춰 최소한의 정보(아이디, 비밀번호)만 수집하며, 추가 프로필 정보는 요구하지 않음.
